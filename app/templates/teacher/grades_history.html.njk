{% extends "layout.html.njk" %}

{% block title %}História známok{% endblock %}

{% macro sortLink(col) %}
    {% set nextDir = 'ASC' %}
    {% if sort == col and dir == 'ASC' %}
        {% set nextDir = 'DESC' %}
    {% endif %}
    ?sort={{ col }}&dir={{ nextDir }}
{% endmacro %}

{% block content %}

<h3>História známok</h3>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>
                <a href="{{ sortLink('grade_value') }}" class="text-decoration-none">
                    Známka
                    {% if sort == 'grade_value' %}
                        {% if dir == 'ASC' %}▲{% else %}▼{% endif %}
                    {% endif %}
                </a>
            </th>

            <th>
                <a href="{{ sortLink('graded_at') }}" class="text-decoration-none">
                    Dátum
                    {% if sort == 'graded_at' %}
                        {% if dir == 'ASC' %}▲{% else %}▼{% endif %}
                    {% endif %}
                </a>
            </th>

            <th>Poznámka</th>
        </tr>
    </thead>

    <tbody>
        {% for g in grades %}
        <tr>
            <td>{{ g.grade_value }}</td>
            <td>{{ g.graded_at | formatDate("dd.MM.yyyy HH:mm") }}</td>
            <td>
                {% if g.note %}
                    {{ g.note }}
                {% else %}
                    -
                {% endif %}
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="3" class="text-center text-muted">
                Žiadne známky
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="javascript:history.back()" class="btn btn-secondary">
    Späť
</a>

{% endblock %}
